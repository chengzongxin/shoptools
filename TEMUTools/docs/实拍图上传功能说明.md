# 实拍图批量上传功能说明

## 功能概述

实拍图批量上传功能支持8个品类的商品实拍图自动批量上传，通过调用TEMU平台的API接口实现自动化操作。

## 支持的品类

1. **抽绳健身包** (cate_id: 31563)
   - 图片文件: `帆布袋、束口袋.jpg`
   - 每页数量: 50

2. **帆布袋** (cate_id: 29157)
   - 图片文件: `帆布袋、束口袋.jpg`
   - 每页数量: 10

3. **冰袖** (cate_id: 27339)
   - 图片文件: `头巾-骑行手套.jpg`
   - 每页数量: 10

4. **头带** (cate_id: 27618)
   - 图片文件: `头带.jpg`
   - 每页数量: 10

5. **头巾** (cate_id: 31087)
   - 图片文件: `头巾-骑行手套.jpg`
   - 每页数量: 10

6. **袜子** (cate_id: 30242)
   - 图片文件: `袜子.jpg`
   - 每页数量: 10

7. **围裙** (cate_id: 28769)
   - 图片文件: `围裙.jpg`
   - 每页数量: 10

8. **抱枕** (cate_id: 12044)
   - 图片文件: `头带.jpg`
   - 每页数量: 10

## 使用前准备

### 1. 图片文件准备

请将以下图片文件放置在 `assets/images/` 目录下：

- `帆布袋、束口袋.jpg`
- `头巾-骑行手套.jpg`
- `头带.jpg`
- `袜子.jpg`
- `围裙.jpg`

### 2. 系统配置

确保在"系统配置"标签页中正确配置了合规相关的Cookie信息：
- Cookie
- Anti-content
- MallID

## 操作流程

### 1. 启动程序

运行主程序，在标签页中选择"上传实拍图"。

### 2. 选择品类

在"品类选择"区域中，选择需要上传实拍图的品类：
- 默认全选所有品类
- 可以单独选择或取消选择某个品类
- 使用"全选"和"取消全选"按钮快速操作

### 3. 开始上传

点击"开始批量上传"按钮，系统将自动执行以下步骤：

1. **检查图片文件**：验证所需的图片文件是否存在
2. **获取上传签名**：调用签名接口获取上传权限
3. **上传图片**：将图片上传到TEMU服务器
4. **查询商品**：获取未上传实拍图的商品列表
5. **批量上传**：将实拍图关联到商品
6. **循环处理**：重复步骤4-5，直到该品类所有商品处理完成
7. **切换品类**：自动进入下一个选中的品类

### 4. 监控进度

- **进度条**：显示当前处理进度
- **操作日志**：实时显示详细的处理日志
- **日志文件**：自动保存到 `logs/` 目录

## 技术实现

### API接口

1. **查询未上传商品**
   ```
   POST https://agentseller.temu.com/api/flash/real_picture/list
   ```

2. **获取上传签名**
   ```
   POST https://agentseller.temu.com/ms/bg-flux-ms/compliance_property/signature
   ```

3. **上传图片**
   ```
   POST https://agentseller.temu.com/api/galerie/v3/store_image
   ```

4. **批量上传实拍图**
   ```
   POST https://agentseller.temu.com/api/flash/real_picture/batch_upload
   ```

### 安全措施

- **随机延迟**：每次API调用前随机延迟1-3秒，模拟人工操作
- **品类间延迟**：不同品类处理间隔5秒
- **错误处理**：完善的异常处理机制，单个品类失败不影响其他品类
- **日志记录**：详细的操作日志，便于问题排查

## 注意事项

1. **网络稳定性**：确保网络连接稳定，避免上传中断
2. **Cookie有效期**：注意Cookie的有效期，过期需要重新配置
3. **图片格式**：确保图片为JPEG格式，文件大小适中
4. **权限检查**：确保有足够的权限进行批量操作
5. **数据备份**：建议在操作前备份重要数据

## 故障排除

### 常见问题

1. **图片文件不存在**
   - 检查 `assets/images/` 目录是否存在
   - 确认图片文件名是否正确

2. **API调用失败**
   - 检查网络连接
   - 验证Cookie配置是否正确
   - 查看日志文件获取详细错误信息

3. **上传进度卡住**
   - 检查是否有网络超时
   - 查看日志确认当前处理状态
   - 必要时重启程序

### 日志分析

日志文件保存在 `logs/real_picture_upload_YYYYMMDD_HHMMSS.log`，包含：
- API请求和响应详情
- 错误信息和异常堆栈
- 处理进度和统计信息

## 更新日志

- **v1.0.0**: 初始版本，支持8个品类的实拍图批量上传 