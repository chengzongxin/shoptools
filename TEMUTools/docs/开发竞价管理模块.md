# 需求

我现在要开发一个竞价管理的功能模块，主要功能如下

# 功能流程

1. 查询待确认邀约接口或者竞价失败的接口，对这两个列表的数据要进行竞价处理：
   a. 待邀约列表是
   url：https://agentseller.temu.com/api/kiana/zoro/PriceComparingOrderSupplierRpcService/searchForSupplier，
   参数：{"pageSize":10,"page":1,"status":2,"confirmInvitingStatus":0}

b. 竞价失败列表是
https://agentseller.temu.com/api/kiana/zoro/PriceComparingOrderSupplierRpcService/searchForSupplier
{"pageSize":10,"page":1,"status":5}

这两个接口的返回结构是：

```json
{
  "result": {
    "tabAggregationList": [
      {
        "count": 151,
        "priceComparingItemTab": 1
      },
      {
        "count": 0,
        "priceComparingItemTab": 2
      },
      {
        "count": 28,
        "priceComparingItemTab": 3
      },
      {
        "count": 5771,
        "priceComparingItemTab": 4
      },
      {
        "count": 6155,
        "priceComparingItemTab": 5
      }
    ],
    "orderItemList": [
      {
        "currencyType": "CNY",
        "currentPriceSort": 2,
        "productId": 8953907312,
        "recommendedPrice": 1218,
        "goodsId": 601101927987552,
        "confirmInvitingStatus": 0,
        "supplierPrice": null,
        "productCount": 2,
        "type": 1,
        "minPurchaseCount": 10,
        "lowestSupplierPrice": null,
        "skcUnPublishCnt": null,
        "allSkcUnPublish": null,
        "currentPriceFirst": "12.18~** CNY",
        "pdsStatusInfo": null,
        "priceComparingOrderStatus": null,
        "startTime": 1759021200000,
        "endTime": 1759334340000,
        "priceComparingOrderId": "J2509271448439",
        "targetProductVO": {
          "productId": 8953907312,
          "name": "Flower For Aexual LGBTQ Daily Tote Bag Shopping Bag With Handle",
          "catNameList": [
            "服装、鞋靴和珠宝饰品",
            "女士时尚",
            "女士手提包和钱包",
            "女士手拎包"
          ],
          "imageList": [
            "https://img.cdnfe.com/product/open/a8ad477d7c104185988105587073e490-goods.jpeg",
            "https://img.cdnfe.com/product/open/cfd94f59473241a2a3ef26094cdaae8c-goods.jpeg",
            "https://img.cdnfe.com/product/open/40b2703652094d3b9ca45b955627a16f-goods.jpeg",
            "https://img.cdnfe.com/product/open/cf0c2ff3e2694f0e94b9e181b5a2ab41-goods.jpeg",
            "https://img.cdnfe.com/product/open/a06cbd82c77c4cb6ab6a9846ec48424a-goods.jpeg",
            "https://img.cdnfe.com/product/open/fb508a63720340f69d68c9a45960263e-goods.jpeg"
          ],
          "catIdList": [27011, 28946, 29152, 29157]
        },
        "status": 2
      },
      {
        "currencyType": "CNY",
        "currentPriceSort": 1,
        "productId": 7338631927,
        "recommendedPrice": 1218,
        "goodsId": 601102272531406,
        "confirmInvitingStatus": 0,
        "supplierPrice": null,
        "productCount": 2,
        "type": 1,
        "minPurchaseCount": 10,
        "lowestSupplierPrice": null,
        "skcUnPublishCnt": null,
        "allSkcUnPublish": null,
        "currentPriceFirst": "12.18~** CNY",
        "pdsStatusInfo": null,
        "priceComparingOrderStatus": null,
        "startTime": 1759021200000,
        "endTime": 1759334340000,
        "priceComparingOrderId": "J2509271448439",
        "targetProductVO": {
          "productId": 7338631927,
          "name": "Flower For Aexual LGBTQ Tote Bag Lightweight Large Capacity Shopping Bag with Handle for Daily Travel Gift Use",
          "catNameList": [
            "服装、鞋靴和珠宝饰品",
            "女士时尚",
            "女士手提包和钱包",
            "女士手拎包"
          ],
          "imageList": [
            "https://img.cdnfe.com/product/open/91c6f7fec4d144028f77ec59ea400067-goods.jpeg",
            "https://img.cdnfe.com/product/open/2331bf7a4da04870bf8f008d83d47afd-goods.jpeg",
            "https://img.cdnfe.com/product/open/24dbd89912634b08b301a382f90bf5d4-goods.jpeg",
            "https://img.cdnfe.com/product/open/8aeac29df1314b999454c4926719fb3e-goods.jpeg",
            "https://img.cdnfe.com/product/open/7216603382ab44c4b5e2e5890d29bc60-goods.jpeg",
            "https://img.cdnfe.com/product/open/489844ba10004c91b92cc433a85e5d9b-goods.jpeg"
          ],
          "catIdList": [27011, 28946, 29152, 29157]
        },
        "status": 2
      }
    ]
  },
  "success": true,
  "errorCode": 1000000,
  "errorMsg": null
}
```

其中 "priceComparingItemTab": 1 是待邀约接口的商品数量，"priceComparingItemTab": 5 是竞价失败的商品数量，需要根据数据分页加载全部商品，可以先请求一次确认邀约接口获取全部数据后，再分页获取全部

2.选择一个商品，查看竞价详情
Url:https://agentseller.temu.com/api/kiana/zoro/PriceComparingOrderSupplierRpcService/queryPriceComparingOrderDetail
参数：{"productId":8953907312,"priceComparingOrderId":"J2509271448439"}
返回：

```json
{
  "result": {
    "confirmInvitingStatus": 0,
    "winSupplierPrice": null,
    "apparel": false,
    "currentSupplierProduct": {
      "productId": 8953907312,
      "appealStatus": null,
      "name": "Flower For Aexual LGBTQ Daily Tote Bag Shopping Bag With Handle",
      "productSkcList": [
        {
          "currencyType": "CNY",
          "comparingCurrencyType": "CNY",
          "result": null,
          "productSkuList": [
            {
              "currencyType": "CNY",
              "comparingCurrencyType": "CNY",
              "productSkuId": 56487128583,
              "propertyValueList": ["Multicolor", "单尺码"],
              "comparingPrice": 1500,
              "supplierPrice": 1500
            }
          ],
          "resultReason": null,
          "unPublishStatus": 0,
          "propertyValueList": [""],
          "comparingPrice": 1500,
          "productSkcId": 44241628997,
          "supplierPrice": 1500,
          "imageList": [
            "https://img.kwcdn.com/product/open/a8ad477d7c104185988105587073e490-goods.jpeg"
          ]
        }
      ],
      "catNameList": [
        "服装、鞋靴和珠宝饰品",
        "女士时尚",
        "女士手提包和钱包",
        "女士手拎包"
      ],
      "catIdList": [27011, 28946, 29152, 29157],
      "imageList": [
        "https://img.cdnfe.com/product/open/a8ad477d7c104185988105587073e490-goods.jpeg",
        "https://img.cdnfe.com/product/open/cfd94f59473241a2a3ef26094cdaae8c-goods.jpeg",
        "https://img.cdnfe.com/product/open/40b2703652094d3b9ca45b955627a16f-goods.jpeg",
        "https://img.cdnfe.com/product/open/cf0c2ff3e2694f0e94b9e181b5a2ab41-goods.jpeg",
        "https://img.cdnfe.com/product/open/a06cbd82c77c4cb6ab6a9846ec48424a-goods.jpeg",
        "https://img.cdnfe.com/product/open/fb508a63720340f69d68c9a45960263e-goods.jpeg"
      ]
    },
    "minPurchaseCount": 0,
    "recommendPrice": "12.18",
    "priceComparingOrderProductSortList": [
      {
        "currencyType": "CNY",
        "productId": 7338631927,
        "name": null,
        "productSkcList": [
          {
            "currencyType": null,
            "comparingCurrencyType": null,
            "result": null,
            "productSkuList": [
              {
                "currencyType": null,
                "comparingCurrencyType": null,
                "productSkuId": 81426334094,
                "propertyValueList": ["Multicolor", "单尺码"],
                "comparingPrice": null,
                "supplierPrice": null
              }
            ],
            "resultReason": null,
            "unPublishStatus": null,
            "propertyValueList": [""],
            "comparingPrice": null,
            "productSkcId": 68807440022,
            "supplierPrice": null,
            "imageList": [
              "https://img.kwcdn.com/product/open/91c6f7fec4d144028f77ec59ea400067-goods.jpeg"
            ]
          }
        ],
        "catNameList": null,
        "catIdList": null,
        "imageList": [
          "https://img.cdnfe.com/product/open/91c6f7fec4d144028f77ec59ea400067-goods.jpeg",
          "https://img.cdnfe.com/product/open/2331bf7a4da04870bf8f008d83d47afd-goods.jpeg",
          "https://img.cdnfe.com/product/open/24dbd89912634b08b301a382f90bf5d4-goods.jpeg",
          "https://img.cdnfe.com/product/open/8aeac29df1314b999454c4926719fb3e-goods.jpeg",
          "https://img.cdnfe.com/product/open/7216603382ab44c4b5e2e5890d29bc60-goods.jpeg",
          "https://img.cdnfe.com/product/open/489844ba10004c91b92cc433a85e5d9b-goods.jpeg"
        ],
        "productPropertyList": [
          {
            "important": false,
            "name": "主题",
            "value": "城市"
          },
          {
            "important": false,
            "name": "关闭",
            "value": "不关闭"
          },
          {
            "important": false,
            "name": "护理说明",
            "value": "手洗或干洗"
          },
          {
            "important": false,
            "name": "材料",
            "value": "帆布"
          },
          {
            "important": false,
            "name": "衬里说明",
            "value": "无衬里"
          },
          {
            "important": false,
            "name": "图案",
            "value": "几何"
          },
          {
            "important": false,
            "name": "货源产地",
            "value": "义乌产区"
          },
          {
            "important": false,
            "name": "油边",
            "value": "否"
          },
          {
            "important": false,
            "name": "包含的组件",
            "value": "无"
          },
          {
            "important": false,
            "name": "颜色",
            "value": "花色"
          }
        ],
        "currSupplierPrice": "12.18~** CNY"
      },
      {
        "currencyType": "CNY",
        "productId": 8953907312,
        "name": null,
        "productSkcList": [
          {
            "currencyType": null,
            "comparingCurrencyType": null,
            "result": null,
            "productSkuList": [
              {
                "currencyType": null,
                "comparingCurrencyType": null,
                "productSkuId": 56487128583,
                "propertyValueList": ["Multicolor", "单尺码"],
                "comparingPrice": null,
                "supplierPrice": null
              }
            ],
            "resultReason": null,
            "unPublishStatus": null,
            "propertyValueList": [""],
            "comparingPrice": null,
            "productSkcId": 44241628997,
            "supplierPrice": null,
            "imageList": [
              "https://img.kwcdn.com/product/open/a8ad477d7c104185988105587073e490-goods.jpeg"
            ]
          }
        ],
        "catNameList": null,
        "catIdList": null,
        "imageList": [
          "https://img.cdnfe.com/product/open/a8ad477d7c104185988105587073e490-goods.jpeg",
          "https://img.cdnfe.com/product/open/cfd94f59473241a2a3ef26094cdaae8c-goods.jpeg",
          "https://img.cdnfe.com/product/open/40b2703652094d3b9ca45b955627a16f-goods.jpeg",
          "https://img.cdnfe.com/product/open/cf0c2ff3e2694f0e94b9e181b5a2ab41-goods.jpeg",
          "https://img.cdnfe.com/product/open/a06cbd82c77c4cb6ab6a9846ec48424a-goods.jpeg",
          "https://img.cdnfe.com/product/open/fb508a63720340f69d68c9a45960263e-goods.jpeg"
        ],
        "productPropertyList": [
          {
            "important": false,
            "name": "主题",
            "value": "城市"
          },
          {
            "important": false,
            "name": "关闭",
            "value": "不关闭"
          },
          {
            "important": false,
            "name": "护理说明",
            "value": "手洗或干洗"
          },
          {
            "important": false,
            "name": "材料",
            "value": "帆布"
          },
          {
            "important": false,
            "name": "衬里说明",
            "value": "无衬里"
          },
          {
            "important": false,
            "name": "图案",
            "value": "几何"
          },
          {
            "important": false,
            "name": "货源产地",
            "value": "义乌产区"
          },
          {
            "important": false,
            "name": "油边",
            "value": "否"
          },
          {
            "important": false,
            "name": "包含的组件",
            "value": "无"
          },
          {
            "important": false,
            "name": "颜色",
            "value": "花色"
          }
        ],
        "currSupplierPrice": "15.00 CNY"
      }
    ],
    "sampleToSendStatus": null,
    "currentSupplierPrice": "¥ 15.00",
    "minCurrencyType": "CNY",
    "endTime": 1759334340000,
    "priceComparingOrderId": "J2509271448439",
    "minSupplierPrice": "12.18",
    "winCurrencyType": null,
    "targetProduct": {
      "productId": 8953907312,
      "appealStatus": 0,
      "name": "Flower For Aexual LGBTQ Daily Tote Bag Shopping Bag With Handle",
      "productSkcList": [
        {
          "currencyType": null,
          "comparingCurrencyType": null,
          "result": null,
          "productSkuList": [
            {
              "currencyType": null,
              "comparingCurrencyType": null,
              "productSkuId": 56487128583,
              "propertyValueList": ["Multicolor", "单尺码"],
              "comparingPrice": null,
              "supplierPrice": null
            }
          ],
          "resultReason": null,
          "unPublishStatus": null,
          "propertyValueList": [""],
          "comparingPrice": null,
          "productSkcId": 44241628997,
          "supplierPrice": null,
          "imageList": [
            "https://img.kwcdn.com/product/open/a8ad477d7c104185988105587073e490-goods.jpeg"
          ]
        }
      ],
      "catNameList": [
        "服装、鞋靴和珠宝饰品",
        "女士时尚",
        "女士手提包和钱包",
        "女士手拎包"
      ],
      "catIdList": [27011, 28946, 29152, 29157],
      "imageList": [
        "https://img.cdnfe.com/product/open/a8ad477d7c104185988105587073e490-goods.jpeg",
        "https://img.cdnfe.com/product/open/cfd94f59473241a2a3ef26094cdaae8c-goods.jpeg",
        "https://img.cdnfe.com/product/open/40b2703652094d3b9ca45b955627a16f-goods.jpeg",
        "https://img.cdnfe.com/product/open/cf0c2ff3e2694f0e94b9e181b5a2ab41-goods.jpeg",
        "https://img.cdnfe.com/product/open/a06cbd82c77c4cb6ab6a9846ec48424a-goods.jpeg",
        "https://img.cdnfe.com/product/open/fb508a63720340f69d68c9a45960263e-goods.jpeg"
      ]
    },
    "priceComparingOrderProductStatus": 2,
    "comparingProductCount": 2
  },
  "success": true,
  "errorCode": 1000000,
  "errorMsg": null
}
```

3. 之后会对这个商品进行竞价，一般比建议价格少一点即可，比如我现在对某一条邀约竞价，主要是针对详情接口的 currentSupplierPrice: "¥ 12.18","minSupplierPrice": "12.00"，如果当前我的出价和最小是一样的，那就不用再去做后续的竞价操作了，否则要去竞价，那我就少个 0.2 元,比如这里我填的是 11.98 元，我点击确认的时候发现调用了两个接口，对应的功能接口是
   url:https://agentseller.temu.com/api/kiana/zoro/PriceComparingOrderSupplierRpcService/confirmInvitation
   参数：{"productId":7338631927,"priceComparingOrderId":"J2509271448439"}
   返回：{"result":null,"success":true,"errorCode":1000000,"errorMsg":null}

还有
url:https://agentseller.temu.com/api/kiana/mms/gmp/bg/magneto/api/price/priceAdjust/gmpProductBatchAdjustPrice
参数：

```json
{
  "adjustItems": [
    {
      "productName": "Flower For Aexual LGBTQ Tote Bag Lightweight Large Capacity Shopping Bag with Handle for Daily Travel Gift Use",
      "productSkcId": 68807440022,
      "productId": 7338631927,
      "skuAdjustList": [
        {
          "targetPriceCurrency": "CNY",
          "oldPriceCurrency": "CNY",
          "oldSupplyPrice": 1218,
          "skuId": 81426334094,
          "targetSupplyPrice": 1198,
          "syncPurchasePrice": 1
        }
      ]
    }
  ],
  "adjustReason": 6
}
```

返回:{"result":null,"success":true,"errorCode":1000000,"errorMsg":null}

这样就完成了一条商品竞价
