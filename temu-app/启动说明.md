# Temu app 项目启动说明

## 🚀 快速启动

### 环境要求
- Python 3.8+
- Node.js 16+
- MySQL 8.0+ (本地开发)
- Docker & Docker Compose (可选)

### Windows 用户

1. **一键启动项目**
   ```bash
   # 双击运行或在命令行执行
   start.bat
   ```

2. **停止项目服务**
   ```bash
   # 双击运行或在命令行执行
   stop.bat
   ```

### Linux/Mac 用户

1. **一键启动项目**
   ```bash
   # 给脚本添加执行权限（首次使用）
   chmod +x start.sh stop.sh
   
   # 启动项目
   ./start.sh
   ```

2. **停止项目服务**
   ```bash
   ./stop.sh
   ```

## 📋 启动流程

### 自动执行的操作

1. **环境检查**
   - 检查Python是否安装
   - 检查Node.js是否安装
   - 检查MySQL是否运行

2. **数据库准备**
   - 创建数据库 `temu_app`（如果不存在）
   - 创建用户表结构
   - 初始化管理员用户

3. **后端服务启动**
   - 安装后端依赖
   - 启动后端服务（http://localhost:8000）

4. **前端服务启动**
   - 安装前端依赖（如果不存在）
   - 启动前端服务（http://localhost:5173）

5. **自动打开浏览器**
   - 启动完成后自动打开前端页面

## 🔐 登录系统

### 默认管理员账户
- **用户名**: `admin`
- **密码**: `admin123`

### 首次使用
1. 启动项目后，访问 http://localhost:5173
2. 系统会自动跳转到登录页面
3. 使用默认管理员账户登录
4. 登录成功后即可使用所有功能

### 初始化管理员用户（如果需要）
如果默认账户无法登录，可以手动初始化：

```bash
# 确保后端服务运行后执行
python init_admin.py
```

## 🗄️ 数据库配置

### 本地MySQL配置
- **主机**: localhost
- **端口**: 3306
- **用户名**: root
- **密码**: 123456789
- **数据库**: temu_app

### 创建数据库（手动）
```sql
CREATE DATABASE IF NOT EXISTS temu_app CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## 🐳 Docker部署

### 使用Docker Compose启动
```bash
# 启动所有服务（包括MySQL）
docker-compose up -d

# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f
```

### 访问地址
- **前端**: http://localhost:8082
- **后端API**: http://localhost:8082/api
- **API文档**: http://localhost:8082/docs

## 🔧 服务地址

- **前端服务**: http://localhost:5173
- **后端服务**: http://localhost:8000
- **API文档**: http://localhost:8000/docs

## ⚠️ 注意事项

### Windows 用户
- 服务会在独立的命令行窗口中运行
- 关闭启动脚本窗口不会停止服务
- 如需停止服务，请运行 `stop.bat` 或手动关闭对应的命令行窗口

### Linux/Mac 用户
- 服务会在后台运行
- 日志文件保存在：
  - 后端日志：`backend/backend.log`
  - 前端日志：`frontend/frontend.log`
- 如需停止服务，请运行 `./stop.sh`

### 数据库相关
- 确保MySQL服务正在运行
- 确保数据库连接配置正确
- 首次启动会自动创建数据库表结构

## 🛠️ 手动启动（可选）

如果自动启动脚本有问题，可以手动启动：

### 启动MySQL
```bash
# Windows (如果使用XAMPP/WAMP)
# 启动MySQL服务

# Linux/Mac
sudo systemctl start mysql
# 或
brew services start mysql
```

### 启动后端
```bash
cd backend
pip install -r requirements.txt  # Windows
# 或
pip3 install -r requirements.txt  # Linux/Mac

# 设置环境变量
export DB_HOST=localhost
export DB_USER=root
export DB_PASSWORD=123456789
export DB_NAME=temu_app

python -m uvicorn main:app --reload  # Windows
# 或
python3 -m uvicorn main:app --reload  # Linux/Mac
```

### 启动前端
```bash
cd frontend
npm install
npm run dev
```

## 🔍 故障排除

1. **端口被占用**
   - 检查8000和5173端口是否被其他程序占用
   - 使用 `netstat -ano | findstr :8000` (Windows) 或 `lsof -i :8000` (Linux/Mac) 查看

2. **数据库连接失败**
   - 确保MySQL服务正在运行
   - 检查数据库连接配置
   - 确保数据库 `temu_app` 已创建

3. **依赖安装失败**
   - 确保网络连接正常
   - 尝试使用国内镜像源
   - 检查Python和Node.js版本

4. **权限问题（Linux/Mac）**
   - 确保脚本有执行权限：`chmod +x start.sh stop.sh`
   - 确保MySQL服务有足够权限

5. **登录问题**
   - 确保后端服务正常运行
   - 检查数据库连接
   - 尝试重新初始化管理员用户

## 📁 项目结构

```
temu-app/
├── start.bat          # Windows启动脚本
├── start.sh           # Linux/Mac启动脚本
├── stop.bat           # Windows停止脚本
├── stop.sh            # Linux/Mac停止脚本
├── init_admin.py      # 初始化管理员用户脚本
├── mysql/
│   └── init.sql       # MySQL初始化脚本
├── backend/           # 后端项目
│   ├── main.py
│   ├── requirements.txt
│   ├── database/      # 数据库配置
│   ├── models/        # 数据模型
│   ├── auth/          # 认证模块
│   └── routers/       # API路由
└── frontend/          # 前端项目
    ├── package.json
    ├── src/
    │   ├── pages/
    │   ├── contexts/
    │   └── components/
    └── ...
```

## 🔒 安全说明

- 默认管理员密码仅用于开发环境
- 生产环境请修改默认密码
- 数据库密码请妥善保管
- 建议在可信网络环境下使用 